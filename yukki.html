
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yukki Interactive</title>
<style>
  body {
    margin: 0; overflow: hidden;
    background: #f0e8dd;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    user-select: none;

  }

  /* –ü–æ–ª */
  #floor {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    height: 80px;
    background: #4b2e05; /* —Ç–µ–º–Ω–æ –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π */
    box-shadow: inset 0 5px 10px #6a4512;
    z-index: 10;
  }

  /* Yukki */
  #yukki-container {
    position: fixed;
    bottom: 80px; /* –Ω–∞–¥ –ø–æ–ª–æ–º */
    right: 20px;
    width: 140px;
    cursor: pointer;
    z-index: 20;
  }
  #yukki-img {
    width: 140px;
    user-select: none;
    transition: transform 0.3s ease;
  }

  /* –ü—É–∑—ã—Ä—å —Ä–µ—á–∏ (–≥–æ–≤–æ—Ä–∏—Ç) */
  #speech-bubble {
    position: fixed;
    bottom: 220px;
    right: 180px;
    max-width: 180px;
    padding: 10px 15px;
    background: #fff;
    border-radius: 20px;
    border: 2px solid #ccc;
    font-size: 16px;
    color: #333;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
    font-weight: 600;
    user-select: none;
    white-space: nowrap;
    z-index: 25;
  }
  #speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -15px;
    right: 30px;
    border: 15px solid transparent;
    border-top-color: #fff;
    border-bottom: 0;
    margin-left: -15px;
  }
  #speech-bubble.hidden {
    display: none;
  }

  /* –ü—É–∑—ã—Ä—å –º—ã—Å–ª–∏ (—ç–º–æ–¥–∑–∏) */
  #thought-bubble {
    position: fixed;
    bottom: 250px;
    right: 210px;
    font-size: 2.5rem;
    user-select: none;
    z-index: 24;
  }

  /* –ö–Ω–æ–ø–∫–∞ —É–π—Ç–∏ */
  #leave-btn {
    position: fixed;
    bottom: 300px;
    right: 180px;
    background: #d9534f;
    color: white;
    border: none;
    border-radius: 12px;
    padding: 8px 14px;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    box-shadow: 1px 1px 4px rgba(0,0,0,0.2);
    z-index: 25;
    transition: background-color 0.3s ease;
  }
  #leave-btn:hover {
    background-color: #c9302c;
  }

  /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —á–µ—Ä—Ç–∞ (draggable) */
  #drag-bar {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 8px;
    height: 80px;
    background: #333;
    cursor: grab;
    border-radius: 4px;
    user-select: none;
    z-index: 30;
  }

  /* –ú—è—á –∏ —Ü—ã–ø–ª–µ–Ω–æ–∫ */
  #ball, #chick {
    position: fixed;
    font-size: 50px;
    user-select: none;
    touch-action: none;
    cursor: pointer;
    z-index: 15;
    transition: transform 0.3s ease;
  }
  #ball {
    display: none;
  }
  #chick {
    display: none;
    font-size: 48px;
  }
</style>
</head>
<body>

<div id="floor"></div>

<div id="yukki-container" title="Click me!">
  <img id="yukki-img" src="Yukki.png" alt="Yukki" />
</div>

<div id="speech-bubble" class="hidden">Hello! üêï</div>
<div id="thought-bubble">üêï</div>
<button id="leave-btn">Leave</button>

<div id="drag-bar" title="Drag me">|</div>

<div id="ball">‚öΩ</div>
<div id="chick">üê§</div>

<!-- Matter.js -->
<script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>

<script>
(() => {
  const yukkiContainer = document.getElementById('yukki-container');
  const yukkiImg = document.getElementById('yukki-img');
  const speechBubble = document.getElementById('speech-bubble');
  const thoughtBubble = document.getElementById('thought-bubble');
  const leaveBtn = document.getElementById('leave-btn');
  const dragBar = document.getElementById('drag-bar');
  const ball = document.getElementById('ball');
  const chick = document.getElementById('chick');

  // –≠–º–æ—Ü–∏–∏ –∏ —Ä–µ—á–∏ Yukki
  const speechTexts = [
    "Hello! üêï",
    "Let's play! üéæ",
    "I'm so happy! ü•∞",
    "Don't forget me! üò¢",
    "Yay! More fun! üòÑ",
    "Want to pet me? üêæ",
  ];

  const thoughtEmojis = ['üçó', 'ü•©', 'üçñ', 'üòá', 'üêæ', 'üêï', 'ü•∞'];

  // –¢–∞–π–º–µ—Ä—ã –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
  let inactivityTime = 0;
  let ballShownToday = false;
  let chickShownToday = false;
  let balloonShownToday = false;

  let inactivityInterval = null;

  // Matter.js setup
  const { Engine, World, Bodies, Body, Events, Mouse, MouseConstraint } = Matter;
  const engine = Engine.create();
  const world = engine.world;

  // –ü–æ–ª - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç
  const floorHeight = 80;
  const floorBody = Bodies.rectangle(window.innerWidth / 2, window.innerHeight - floorHeight / 2, window.innerWidth, floorHeight, { isStatic: true, label: 'floor' });
  World.add(world, floorBody);

  // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —á–µ—Ä—Ç–∞ (draggable)
  const dragBarWidth = 8;
  const dragBarHeight = 80;
  let dragBarBody = Bodies.rectangle(dragBar.offsetLeft + dragBarWidth / 2, dragBar.offsetTop + dragBarHeight / 2, dragBarWidth, dragBarHeight, { isStatic: true, label: 'dragBar' });
  World.add(world, dragBarBody);

  // –ú—è—á–∏–∫ - –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏
  let ballBody = null;
  let ballVisible = false;

  // –¶—ã–ø–ª–µ–Ω–æ–∫ - –Ω–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS
  let chickVisible = false;
  let chickPositionX = window.innerWidth;
  const chickTargetX = window.innerWidth / 2 - 24;
  const chickStep = 2;

  // –õ–æ–≥–∏–∫–∞ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
  function resetInactivity() {
    inactivityTime = 0;
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è dragBarBody –ø–æ dragBar div
  function updateDragBarBody() {
    Body.setPosition(dragBarBody, {
      x: dragBar.offsetLeft + dragBarWidth / 2,
      y: dragBar.offsetTop + dragBarHeight / 2
    });
  }

  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM –ø–æ —Ñ–∏–∑–∏–∫–µ –º—è—á–∞
  function updateBallPosition() {
    if(!ballBody) return;
    ball.style.left = (ballBody.position.x - 25) + 'px';
    ball.style.top = (ballBody.position.y - 25) + 'px';
    ball.style.transform = `rotate(${ballBody.angle}rad)`;
  }

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º—è—á–∞ –≤ —Ñ–∏–∑–∏–∫—É –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  function showBall() {
    if (ballVisible || ballShownToday) return;
    ballVisible = true;
    ballShownToday = true;
    ball.style.display = 'block';

    // –°—Ç–∞—Ä—Ç–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è ‚Äî —Å–ø—Ä–∞–≤–∞ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º, —á—É—Ç—å –≤—ã—à–µ –ø–æ–ª–∞
    const startX = window.innerWidth + 40;
    const startY = window.innerHeight - floorHeight - 30;

    ballBody = Bodies.circle(startX, startY, 25, {
      restitution: 0.7,
      friction: 0.05,
      frictionAir: 0.02,
      label: 'ball'
    });

    World.add(world, ballBody);

    // –î–∞–µ–º –∏–º–ø—É–ª—å—Å –≤–ª–µ–≤–æ, —á—Ç–æ–±—ã –∫–∞—Ç–∏–ª—Å—è
    Body.setVelocity(ballBody, { x: -5, y: 0 });
  }

  // –£–±—Ä–∞—Ç—å –º—è—á
  function hideBall() {
    if (!ballVisible) return;
    ballVisible = false;
    ball.style.display = 'none';
    if(ballBody) {
      World.remove(world, ballBody);
      ballBody = null;
    }
  }

  // –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ü—ã–ø–ª–µ–Ω–∫–∞ (–¥–≤–∏–∂–µ—Ç—Å—è –≤ —Ü–µ–Ω—Ç—Ä)
  function showChick() {
    if (chickVisible || chickShownToday) return;
    chickVisible = true;
    chickShownToday = true;
    chick.style.display = 'block';
    chickPositionX = window.innerWidth;
    chick.style.left = chickPositionX + 'px';
    chick.style.bottom = (floorHeight + 20) + 'px';
  }

  // –£–±—Ä–∞—Ç—å —Ü—ã–ø–ª–µ–Ω–∫–∞
  function hideChick() {
    chickVisible = false;
    chick.style.display = 'none';
  }

  // –î–≤–∏–∂–µ–Ω–∏–µ —Ü—ã–ø–ª–µ–Ω–∫–∞ –∫ —Ü–µ–Ω—Ç—Ä—É –∏ –æ–∂–∏–¥–∞–Ω–∏–µ
  function moveChick() {
    if(!chickVisible) return;
    if(chickPositionX > chickTargetX) {
      chickPositionX -= chickStep;
      chick.style.left = chickPositionX + 'px';
    } else {
      chick.style.left = chickTargetX + 'px';
    }
  }

  // –ü–æ—è–≤–ª–µ–Ω–∏–µ —à–∞—Ä–∏–∫–∞ üéà —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö ‚Äî —Ä–∞–∑ –≤ –¥–µ–Ω—å
  // (–ø–æ —Ç–≤–æ–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ç–æ–º)

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ—á—å Yukki
  function showSpeech(text, timeout = 4000) {
    speechBubble.textContent = text;
    speechBubble.classList.remove('hidden');
    clearTimeout(speechTimeout);
    speechTimeout = setTimeout(() => {
      speechBubble.classList.add('hidden');
    }, timeout);
  }

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –º—ã—Å–ª–∏ Yukki (—ç–º–æ–¥–∑–∏)
  function showThought(emoji) {
    thoughtBubble.textContent = emoji;
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Yukki –Ω–∞ –≥—Ä—É—Å—Ç–Ω—É—é –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
  function leaveSite() {
    yukkiImg.src = 'Yukki_sad.png';
    showSpeech("Don't go ü•∫", 8000);
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª—É—á–∞–π–Ω—É—é —Ä–µ—á—å
  function randomSpeech() {
    const text = speechTexts[Math.floor(Math.random() * speechTexts.length)];
    showSpeech(text);
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –º—ã—Å–ª—å
  function randomThought() {
    const emoji = thoughtEmojis[Math.floor(Math.random() * thoughtEmojis.length)];
    showThought(emoji);
  }

  // Drag logic –¥–ª—è dragBar (—Ç–æ–∂–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–ª–æ Matter)
  let dragging = false;
  let dragOffsetX, dragOffsetY;

  dragBar.addEventListener('mousedown', e => {
    dragging = true;
    dragOffsetX = e.clientX - dragBar.offsetLeft;
    dragOffsetY = e.clientY - dragBar.offsetTop;
    dragBar.style.cursor = 'grabbing';
  });
  window.addEventListener('mouseup', e => {
    dragging = false;
    dragBar.style.cursor = 'grab';
  });
  window.addEventListener('mousemove', e => {
    if (!dragging) return;
    let x = e.clientX - dragOffsetX;
    let y = e.clientY - dragOffsetY;

    x = Math.min(Math.max(x, 0), window.innerWidth - dragBar.offsetWidth);
    y = Math.min(Math.max(y, 0), window.innerHeight - dragBar.offsetHeight);

    dragBar.style.left = x + 'px';
    dragBar.style.top = y + 'px';
    updateDragBarBody();
  });

  // –ù–∞–∂–∞—Ç–∏—è –Ω–∞ Yukki
  yukkiContainer.addEventListener('click', () => {
    showThought('ü•∞');
    setTimeout(() => showThought('üêï'), 3000);
    resetInactivity();






  });

  // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —à–∞—Ä–∏–∫
  ball.addEventListener('click', () => {
    showThought('üò≥');
    resetInactivity();
  });

  // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ —Ü—ã–ø–ª–µ–Ω–∫–∞ - –æ–Ω —É–±–µ–≥–∞–µ—Ç –∏ –¥—É–º–∞–µ—Ç
  chick.addEventListener('click', () => {
    showThought('üò≥');
    hideChick();
    resetInactivity();
  });

  // –ö–Ω–æ–ø–∫–∞ —É–π—Ç–∏
  leaveBtn.addEventListener('click', () => {
    leaveSite();



  });

  // Matter.js runner
  Matter.Runner.run(engine);







  // –î–æ–±–∞–≤–∏–º mouseConstraint –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –º—è—á–∞
  const mouse = Matter.Mouse.create(document.body);
  const mouseConstraint = Matter.MouseConstraint.create(engine, {
    mouse: mouse,
    constraint: { stiffness: 0.2, render: { visible: false } }
  });
  World.add(world, mouseConstraint);

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –º—è—á–∞ –∏ dragBar –≤ –∞–Ω–∏–º–∞—Ü–∏–∏
  function animate() {
    if (ballVisible && ballBody) {
      updateBallPosition();
      // –µ—Å–ª–∏ –º—è—á —Å–ª–∏—à–∫–æ–º —Å–ª–µ–≤–∞, —É–±–∏—Ä–∞–µ–º
      if(ballBody.position.x < -30) {
        hideBall();
      }
    }
    moveChick();
    requestAnimationFrame(animate);
  }
  animate();

  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –ª—é–±–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ, –∫–ª–∏–∫, –Ω–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à
  ['mousemove', 'mousedown', 'keydown', 'touchstart'].forEach(evt => {
    window.addEventListener(evt, () => {
      resetInactivity();
    }, { passive: true });
  });

  // –¢–∞–π–º–µ—Ä –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
  inactivityInterval = setInterval(() => {
    inactivityTime++;

    if(inactivityTime === 30) { // 30 —Å–µ–∫—É–Ω–¥
      showBall();
    }

    if(inactivityTime === 120) { // 2 –º–∏–Ω—É—Ç—ã
      showChick();
    }

  }, 1000);

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  updateDragBarBody();

  // –ù–∞—á–∞–ª—å–Ω—ã–µ —Ä–µ—á—å –∏ –º—ã—Å–ª—å
  showSpeech(speechTexts[0], 5000);
  showThought(thoughtEmojis[5]);

  // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–ª–∞ –∏ —Ç–µ–ª–∞ –ø–æ–ª–∞ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ
  window.addEventListener('resize', () => {
    Body.setPosition(floorBody, {
      x: window.innerWidth / 2,
      y: window.innerHeight - floorHeight / 2
    });
    Body.setVertices(floorBody, [
      { x: 0, y: window.innerHeight - floorHeight },
      { x: window.innerWidth, y: window.innerHeight - floorHeight },
      { x: window.innerWidth, y: window.innerHeight },
      { x: 0, y: window.innerHeight },
    ]);
  });

})();
</script>

</body>
