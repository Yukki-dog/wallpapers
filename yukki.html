<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yukki Home</title>
  <style>
    /* --- –û–±—â–∏–π —Å—Ç–∏–ª—å –∏ —Ñ–æ–Ω --- */
    html, body {
      margin: 0; padding: 0;
      width: 100vw; height: 100vh;
      overflow: hidden;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background-color: #fff8f0;
      background-image: url('stickers/paws_bg.png');
      background-repeat: repeat;
      user-select: none;
    }
    /* --- –Æ–∫–∫–∏ –∏ –ø—É–∑—ã—Ä—å–∫–∏ —Ä–µ—á–∏/–º—ã—Å–ª–µ–π --- */
    #yukki {
      position: absolute;
      bottom: 50px;
      left: 50px;
      width: 110px;
      cursor: pointer;
      transition: all 0.5s ease;
      z-index: 20;
    }
    .bubble {
      position: absolute;
      max-width: 180px;
      padding: 10px 15px;
      background: #fff;
      border-radius: 25px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      font-size: 15px;
      line-height: 1.3;
      color: #222;
      user-select: none;
      pointer-events: none;
      z-index: 30;
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    .bubble.speech {
      border: 2px solid #ffc2cc;
      background: #fff0f5;
    }
    .bubble.thought {
      border: 2px dashed #ff99aa;
      background: #fff8f8;
    }
    /* –•–≤–æ—Å—Ç–∏–∫–∏ –ø—É–∑—ã—Ä—å–∫–æ–≤ */
    .bubble.speech::after {
      content: "";
      position: absolute;
      bottom: -12px;
      left: 20px;
      border-width: 12px;
      border-style: solid;
      border-color: #fff0f5 transparent transparent transparent;
      filter: drop-shadow(0 1px 1px rgba(0,0,0,0.1));
    }
    .bubble.thought::after {
      content: "";
      position: absolute;
      bottom: -14px;
      left: 20px;
      width: 14px;
      height: 14px;
      background: #fff8f8;
      border-radius: 50%;
      box-shadow: -10px 10px 0 0 #fff8f8;
    }
    /* --- –ö–æ–Ω—Ç—Ä–æ–ª—ã —Å–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ --- */
    .controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      z-index: 100;
    }
    .controls button {
      font-size: 16px;
      background: #ffe0e6;
      border: none;
      padding: 10px 18px;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 3px 5px rgba(255,192,203,0.5);
      transition: background 0.3s ease;
      user-select: none;
    }
    .controls button:hover {
      background: #ffb0bf;
      color: #fff;
      box-shadow: 0 5px 10px rgba(255,105,180,0.7);
    }
    /* --- –ü–æ–ª --- */
    #floor {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100vw;
      height: 60px;
      background: linear-gradient(90deg, #6b4f3b 0%, #5a3f2a 50%, #6b4f3b 100%);
      box-shadow: inset 0 10px 8px -8px #7f5a42;
      z-index: 15;
      user-select: none;
    }
    /* --- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–µ –ø–∞–ª–æ—á–∫–∏ --- */
    .drag-stick {
      position: absolute;
      top: 20px;
      width: 6px;
      height: 120px;
      background: #bb8f66;
      border-radius: 3px;
      box-shadow: 0 0 8px 2px rgba(187,143,102,0.7);
      cursor: grab;
      z-index: 25;
      user-select: none;
    }
    #stick1 {
      left: 10px;
    }
    #stick2 {
      left: 30px;
      height: 140px;
      background: #c9a675;
      box-shadow: 0 0 9px 2px rgba(201,166,117,0.7);
    }
    /* --- –°—Ç–∏–∫–µ—Ä—ã –∏–≥—Ä—É—à–µ–∫ –Æ–∫–∫–∏ --- */
    .toy {
      position: absolute;
      width: 45px;
      height: 45px;
      font-size: 40px;
      user-select: none;
      cursor: grab;
      z-index: 22;
      transition: filter 0.3s ease;
    }
    .toy:active {
      cursor: grabbing;
      filter: brightness(1.2);
    }
    #toy_ball {
      bottom: 110px;
      right: 160px;
    }
    #toy_bone {
      bottom: 105px;
      right: 220px;
    }
    /* --- –ü—Ç–µ–Ω–µ—Ü –∏ —à–∞—Ä–∏–∫ --- */
    #chick {
      position: absolute;
      font-size: 38px;
      bottom: 70px;
      left: -50px;
      cursor: pointer;
      z-index: 21;
      user-select: none;
      transition: left 2s ease;
    }
    #balloon {
      position: absolute;
      font-size: 40px;
      bottom: 20px;
      left: 50%;
      user-select: none;
      pointer-events: none;
      opacity: 0;
      transform: translateX(-50%);
      z-index: 10;
    }
    #soccer {
      position: absolute;
      font-size: 38px;
      bottom: 65px;
      right: -50px;
      user-select: none;
      cursor: grab;
      z-index: 22;
      transition: right 3s linear;
    }
  </style>
</head>
<body>
  <!-- –Æ–∫–∫–∏ -->
  <img id="yukki" src="Yukki.png" alt="Yukki" title="Click me!" />
  <!-- –ë–∞–±–ª—ã —Ä–µ—á–∏ –∏ –º—ã—Å–ª–µ–π -->
  <div id="bubble" class="bubble speech" style="left: 160px; bottom: 130px; opacity: 0;">Hi there!</div>
  <div id="thought" class="bubble thought" style="left: 160px; bottom: 180px; opacity: 0;">üí≠</div>

  <!-- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–µ –ø–∞–ª–æ—á–∫–∏ -->
  <div id="stick1" class="drag-stick" title="Drag me!"></div>
  <div id="stick2" class="drag-stick" title="Drag me too!"></div>

  <!-- –ò–≥—Ä—É—à–∫–∏ -->
  <div id="toy_ball" class="toy" title="Yukki's Ball">‚öæ</div>
  <div id="toy_bone" class="toy" title="Yukki's Bone">ü¶¥</div>

  <!-- –ü—Ç–µ–Ω–µ—Ü -->
  <div id="chick" title="Click me!">üê§</div>
  <!-- –®–∞—Ä–∏–∫ -->
  <div id="balloon">üéà</div>
  <!-- –ú—è—á -->
  <div id="soccer" title="Drag me!">‚öΩ</div>

  <!-- –ü–æ–ª -->
  <div id="floor"></div>

  <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã -->
  <div class="controls">
    <button id="petBtn">üê∂ Pet Yukki</button>
    <button id="treatBtn">ü¶¥ Give Treat</button>
    <button id="bgBtn">üé® Change Background</button>
    <button id="leaveBtn">üö™ Leave</button>
  </div>

  <!-- Matter.js -->
  <script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>

  <script>
  (() => {
    const yukki = document.getElementById('yukki');
    const bubble = document.getElementById('bubble');
    const thought = document.getElementById('thought');
    const petBtn = document.getElementById('petBtn');
    const treatBtn = document.getElementById('treatBtn');
    const bgBtn = document.getElementById('bgBtn');
    const leaveBtn = document.getElementById('leaveBtn');
    const chick = document.getElementById('chick');
    const balloon = document.getElementById('balloon');
    const soccer = document.getElementById('soccer');
    const floor = document.getElementById('floor');
    const stick1 = document.getElementById('stick1');
    const stick2 = document.getElementById('stick2');
    const toyBall = document.getElementById('toy_ball');
    const toyBone = document.getElementById('toy_bone');

    // --- –ú–´–°–õ–ò –∏ –†–ï–ß–¨ ---
    function showBubble(type, text, duration = 3000) {
      if(type === 'speech') {
        bubble.innerText = text;
        bubble.style.opacity = 1;
        thought.style.opacity = 0;
        clearTimeout(bubble.hideTimeout);
        bubble.hideTimeout = setTimeout(() => bubble.style.opacity = 0, duration);
      } else if(type === 'thought') {
        thought.innerText = text;
        thought.style.opacity = 1;
        bubble.style.opacity = 0;
        clearTimeout(thought.hideTimeout);
        thought.hideTimeout = setTimeout(() => thought.style.opacity = 0, duration);
      }
    }

    // –ú—ã—Å–ª–∏ –Æ–∫–∫–∏
    const yukkiThoughts = ['üíû', 'üêæ', 'ü•∞', 'üòá', 'üçñ', 'üêï'];

    function yukkiThink() {
      const t = yukkiThoughts[Math.floor(Math.random()*yukkiThoughts.length)];
      showBubble('thought', t, 4000);
    }

    function yukkiSpeak(text) {
      showBubble('speech', text, 4000);
    }

    // --- –°–º–µ–Ω–∞ —Ñ–æ–Ω–æ–≤ ---
    const backgrounds = [
      'stickers/paws_bg.png',
      'stickers/stars_bg.png',
      'stickers/hearts_bg.png'
    ];
    let bgIndex = 0;
    bgBtn.addEventListener('click', () => {
      bgIndex = (bgIndex + 1) % backgrounds.length;
      document.body.style.backgroundImage = `url('${backgrounds[bgIndex]}')`;
    });

    // --- –ö–Ω–æ–ø–∫–∏ ---
    petBtn.addEventListener('click', () => {
      yukkiThink();
    });

    treatBtn.addEventListener('click', () => {
      showBubble('thought', 'üçó Yummy!', 3500);
    });

    // --- –£—Ö–æ–¥ —Å —Å–∞–π—Ç–∞ ---
    let leftOnce = false;
    leaveBtn.addEventListener('click', () => {
      if (!leftOnce) {
        yukki.src = 'Yukki_sad.png';
        yukkiSpeak("Don't go ü•∫");
        leftOnce = true;
        setTimeout(() => {
          yukki.src = 'Yukki.png';
        }, 4000);
      } else {
        window.location.href = 'https://yukki-dog.github.io/wallpapers/home_page.html';
      }
    });

    // --- Matter.js –§–∏–∑–∏–∫–∞ ---
    const { Engine, Render, Runner, World, Bodies, Mouse, MouseConstraint, Events, Body } = Matter;
    const engine = Engine.create();
    const world = engine.world;

    // –ü–æ–∑–∏—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—Ä—ã
    const w = window.innerWidth;
    const h = window.innerHeight;

    // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–≤–∞—Å –¥–ª—è Matter.js
    const canvas = document.createElement('canvas');
    canvas.style.position = 'absolute';
    canvas.style.top = '0';
    canvas.style.left = '0';
    canvas.style.zIndex = '5';
    canvas.width = w;
    canvas.height = h;
    document.body.appendChild(canvas);

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∞
    const render = Render.create({
      canvas: canvas,
      engine: engine,
      options: {
        width: w,
        height: h,
        wireframes: false,
        background: 'transparent',
        pixelRatio: window.devicePixelRatio
      }
    });

    Render.run(render);
    const runner = Runner.create();
    Runner.run(runner, engine);

    // –ü–æ–ª ‚Äî —Ç–µ–ª–æ —Å—Ç–∞—Ç–∏–∫–∞
    const ground = Bodies.rectangle(w/2, h - 30, w, 60, {
      isStatic: true,
      render: { fillStyle: '#6b4f3b' }
    });
    World.add(world, ground);

    // –ü–∞–ª–æ—á–∫–∏ ‚Äî —Å—Ç–∞—Ç–∏—á–Ω—ã–µ —Ç–µ–ª–∞, –Ω–æ –º–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å –º—ã—à–∫–æ–π
    const stickBody1 = Bodies.rectangle(40, 80, 6, 120, {
      isStatic: true,
      render: { fillStyle: '#bb8f66' },
      collisionFilter: { group: -1 }
    });
    const stickBody2 = Bodies.rectangle(80, 90, 6, 140, {
      isStatic: true,
      render: { fillStyle: '#c9a675' },
      collisionFilter: { group: -1 }
    });
    World.add(world, [stickBody1, stickBody2]);

    // –§—É–Ω–∫—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø–∞–ª–æ—á–µ–∫ DOM –∏ —Ç–µ–ª Matter.js
    function syncSticks() {
      stick1.style.left = (stickBody1.position.x - 3) + 'px';
      stick1.style.top = (stickBody1.position.y - 60) + 'px';

      stick2.style.left = (stickBody2.position.x - 3) + 'px';
      stick2.style.top = (stickBody2.position.y - 70) + 'px';
    }
    syncSticks();

    // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –ø–∞–ª–æ—á–µ–∫ –º—ã—à—å—é (–ø—Ä–∏–≤—è–∑–∫–∞ –∫ Matter.js —Ç–µ–ª–∞–º)
    let dragStick = null;
    let dragOffsetY = 0;
    let dragOffsetX = 0;

    function pointerDown(e) {
      const target = e.target;
      if(target === stick1 || target === stick2) {
        dragStick = target;
        const rect = target.getBoundingClientRect();
        dragOffsetX = e.clientX - rect.left;
        dragOffsetY = e.clientY - rect.top;
        // –û—Ç–∫–ª—é—á–∞–µ–º —Ñ–∏–∑–∏–∫—É –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        if(dragStick === stick1) Body.setStatic(stickBody1, false);
        else if(dragStick === stick2) Body.setStatic(stickBody2, false);
      }
      if(target === soccer || target === toyBall || target === toyBone) {
        dragStick = target;
        dragOffsetX = e.clientX - target.offsetLeft;
        dragOffsetY = e.clientY - target.offsetTop;
        draggingToy = true;
      }
    }
    function pointerMove(e) {
      if(!dragStick) return;
      const x = e.clientX - dragOffsetX;
      const y = e.clientY - dragOffsetY;
      if(dragStick === stick1) {
        Body.setPosition(stickBody1, {x: x + 3, y: y + 60});
        syncSticks();
      } else if(dragStick === stick2) {
        Body.setPosition(stickBody2, {x: x + 3, y: y + 70});
        syncSticks();
      } else if(dragStick === soccer || dragStick === toyBall || dragStick === toyBone) {
        dragStick.style.left = x + 'px';
        dragStick.style.top = y + 'px';
        // –¢–µ–ª–∞–º Matter.js –¥–ª—è –∏–≥—Ä—É—à–µ–∫ ‚Äî –µ—Å–ª–∏ –µ—Å—Ç—å, –º–æ–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –ø–æ—Ç–æ–º)
      }
    }
    function pointerUp() {
      if(dragStick) {
        if(dragStick === stick1) Body.setStatic(stickBody1, true);
        if(dragStick === stick2) Body.setStatic(stickBody2, true);
      }
      dragStick = null;
      draggingToy = false;
    }
    window.addEventListener('pointerdown', pointerDown);
    window.addEventListener('pointermove', pointerMove);
    window.addEventListener('pointerup', pointerUp);

    // --- –°–æ–∑–¥–∞–µ–º –º—è—á–∏ —Å —Ñ–∏–∑–∏–∫–æ–π –¥–ª—è ‚öΩ, ‚öæ, ü¶¥ ---
    // –û–±—ä–µ–∫—Ç—ã –¥–ª—è —Ç—Ä—ë—Ö –∏–≥—Ä—É—à–µ–∫ Matter.js —Ç–µ–ª–∞
    const toyBodies = {};

    function createToyBody(domElem, radius, density = 0.002, restitution = 0.7) {
      const rect = domElem.getBoundingClientRect();
      const x = rect.left + radius;
      const y = rect.top + radius;
      const body = Bodies.circle(x, y, radius, {
        restitution: restitution,
        density: density,
        friction: 0.1,
        frictionAir: 0.02,
        render: { visible: false } // –°–∫—Ä—ã–≤–∞–µ–º Matter.js —Ñ–∏–≥—É—Ä—É
      });
      World.add(world, body);
      return body;
    }
    toyBodies.soccer = createToyBody(soccer, 20, 0.001, 0.8);
    toyBodies.ball = createToyBody(toyBall, 22, 0.003, 0.7);
    toyBodies.bone = createToyBody(toyBone, 22, 0.003, 0.6);

    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –ø–æ–∑–∏—Ü–∏–∏ DOM –∏–≥—Ä—É—à–µ–∫ —Å —Ñ–∏–∑–∏–∫–æ–π
    function syncToyPositions() {
      for (const key in toyBodies) {
        const body = toyBodies[key];
        let elem;
        if(key === 'soccer') elem = soccer;
        else if(key === 'ball') elem = toyBall;
        else if(key === 'bone') elem = toyBone;
        if(elem) {
          elem.style.left = (body.position.x - elem.offsetWidth/2) + 'px';
          elem.style.top = (body.position.y - elem.offsetHeight/2) + 'px';
        }
      }
    }

    // –ö–æ–≥–¥–∞ –º—è—á ‚öΩ –∫–∞—Ç–∏—Ç—Å—è ‚Äî –ø—É—Å—Ç—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞ –∏ –∫–∞—Ç–∏—Ç—Å—è –≤–ª–µ–≤–æ –ø–æ—Å–ª–µ 30 —Å–µ–∫—É–Ω–¥ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
    let idleTimeout = null;
    let ballDropped = false;

    function resetIdleTimer() {
      clearTimeout(idleTimeout);
      idleTimeout = setTimeout(() => {
        if (!ballDropped) {
          // –ü–æ—è–≤–ª–µ–Ω–∏–µ –º—è—á–∞ —Å–ø—Ä–∞–≤–∞
          Body.setPosition(toyBodies.soccer, { x: w + 40, y: h - 100 });
          Body.setVelocity(toyBodies.soccer, { x: -5, y: 0 });
          ballDropped = true;
        }
      }, 30000); // 30 —Å–µ–∫
    }
    ['mousemove', 'mousedown', 'keydown', 'touchstart'].forEach(ev => {
      window.addEventListener(ev, resetIdleTimer);
    });
    resetIdleTimer();

    // –ü—Ç–µ–Ω–µ—Ü üê§ –±–µ–≥–∞–µ—Ç –∫ —Ü–µ–Ω—Ç—Ä—É, –º–µ–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ —Ç–∞–º, –º–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å ‚Äî —É–±–µ–≥–∞–µ—Ç –≤–ª–µ–≤–æ –∑–∞ —ç–∫—Ä–∞–Ω
    let chickCenterX = w/2;
    let chickRunning = false;
    let chickAtCenter = false;

    function moveChickToCenter() {
      if (!chickRunning) {
        chickRunning = true;
        chick.style.transition = 'left 6s linear';
        chick.style.left = chickCenterX + 'px';
        setTimeout(() => {
          chick.textContent = 'üê•'; // –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ —Ü—ã–ø–ª–µ–Ω–∫–∞
          chickAtCenter = true;
          chickRunning = false;
        }, 6000);
      }
    }
    moveChickToCenter();

    chick.addEventListener('click', () => {
      if (chickAtCenter) {
        chick.style.transition = 'left 1s linear';
        chick.style.left = '-100px'; // —É–±–µ–≥–∞–µ—Ç –∑–∞ —ç–∫—Ä–∞–Ω –Ω–∞–ª–µ–≤–æ
        chickAtCenter = false;
      }
    });

    // –ü–æ—è–≤–ª–µ–Ω–∏–µ —à–∞—Ä–∏–∫–∞ üéà –ø–æ—Å–ª–µ 2 –º–∏–Ω—É—Ç
    setTimeout(() => {
      balloon.style.opacity = '1';
    }, 120000);

    // –ê–Ω–∏–º–∞—Ü–∏—è —à–∞—Ä–∏–∫–∞ –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ (–º–∏–ª—ã–π —ç—Ñ—Ñ–µ–∫—Ç)
    let balloonDirection = 1;
    setInterval(() => {
      const currentBottom = parseFloat(window.getComputedStyle(balloon).bottom);
      if(currentBottom >= 30) balloonDirection = -1;
      if(currentBottom <= 20) balloonDirection = 1;
      balloon.style.bottom = (currentBottom + balloonDirection*0.5) + 'px';
    }, 60);

    // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–≤–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø–∞–ª–æ—á–µ–∫ –∏ –∏–≥—Ä—É—à–µ–∫
    function update() {
      syncSticks();
      syncToyPositions();
      requestAnimationFrame(update);
    }
    update();

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –∏–≥—Ä—É—à–µ–∫ —Å —Ñ–∏–∑–∏–∫–æ–π (—Ç–æ–ª—å–∫–æ –º—è—á ‚öΩ)
    let draggingToy = false;

    soccer.addEventListener('pointerdown', e => {
      draggingToy = true;
      Body.setStatic(toyBodies.soccer, true);
    });
    window.addEventListener('pointermove', e => {
      if (draggingToy) {
        let x = e.clientX;
        let y = e.clientY;
        Body.setPosition(toyBodies.soccer, {x, y});
      }
    });
    window.addEventListener('pointerup', e => {
      if(draggingToy) {
        draggingToy = false;
        Body.setStatic(toyBodies.soccer, false);
        // –ø–ª–∞–≤–Ω–æ–µ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ (—Ñ—Ä–∏–∫—Ü–∏—è)
        Body.setVelocity(toyBodies.soccer, {x: 0, y: 0});
      }
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞ (canvas –∏ —Ñ–∏–∑–∏–∫–∞)
    window.addEventListener('resize', () => {
      const w2 = window.innerWidth;
      const h2 = window.innerHeight;
      render.canvas.width = w2;
      render.canvas.height = h2;
      Body.setPosition(ground, { x: w2/2, y: h2 - 30 });
      Body.setVertices(ground, [
        { x: 0, y: h2 - 60 },
        { x: w2, y: h2 - 60 },
        { x: w2, y: h2 },
        { x: 0, y: h2 }
      ]);
    });

  })();
  </script>
</body>
</html>
