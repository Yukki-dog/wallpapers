<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yukki Home Cozy</title>
<style>
  /* ========== –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ ========== */
  html, body {
    margin: 0; padding: 0;
    width: 100vw; height: 100vh;
    overflow: hidden;
    background: #fff8f0 url('stickers/paws_bg.png') repeat;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    user-select: none;
    position: relative;
  }
  /* –ö–Ω–æ–ø–∫–∏ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞ */
  .controls {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 100;
  }
  .controls button {
    background: #ffe0e6;
    border: none;
    border-radius: 25px;
    padding: 12px 18px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    transition: background 0.3s ease;
  }
  .controls button:hover {
    background: #ffc2cc;
  }
  /* –Æ–∫–∫–∏ */
  #yukki {
    position: fixed;
    bottom: 50px;
    left: 50px;
    width: 130px;
    user-select: none;
    cursor: pointer;
    transition: filter 0.5s ease;
    z-index: 90;
  }
  /* –û–±–ª–∞–∫–∞ —Ä–µ—á–∏ –∏ –º—ã—Å–ª–µ–π */
  .bubble {
    position: fixed;
    max-width: 220px;
    padding: 10px 16px;
    background: white;
    border-radius: 25px;
    font-size: 14px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.12);
    user-select: none;
    pointer-events: none;
    color: #333;
    z-index: 95;
    opacity: 0;
    transition: opacity 0.4s ease;
  }
  .bubble.visible {
    opacity: 1;
  }
  .bubble.speech {
    bottom: 180px;
    left: 200px;
  }
  .bubble.thought {
    bottom: 220px;
    left: 170px;
    background: #fffbf7;
    font-style: italic;
  }
  .bubble.speech::after {
    content: "";
    position: absolute;
    bottom: -12px;
    left: 25px;
    border-width: 12px;
    border-style: solid;
    border-color: white transparent transparent transparent;
  }
  .bubble.thought::after {
    content: "üí≠";
    position: absolute;
    bottom: -20px;
    left: 30px;
    font-size: 18px;
  }
  /* –ö–∞–Ω–≤–∞—Å (–ø–ª–æ—â–∞–¥–∫–∞ —Å —Ñ–∏–∑–∏–∫–æ–π) */
  #world {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 50;
  }
  /* –ü–æ–ª–æ—á–∫–∏ */
  .shelf {
    position: fixed;
    background: #a97c50;
    border-radius: 8px;
    box-shadow: inset 0 0 6px #6b4f3b;
    z-index: 70;
  }
  #shelf-bottom {
    bottom: 10px;
    left: 0;
    width: 100vw;
    height: 60px;
  }
  #shelf-left {
    bottom: 80px;
    left: 20px;
    width: 150px;
    height: 15px;
  }
  #shelf-right {
    bottom: 150px;
    right: 50px;
    width: 160px;
    height: 20px;
  }
</style>
</head>
<body>

<!-- –Æ–∫–∫–∏ -->
<img id="yukki" src="Yukki.png" alt="Yukki" draggable="false" />

<!-- –û–±–ª–∞–∫–∞ —Ä–µ—á–∏ –∏ –º—ã—Å–ª–µ–π -->
<div id="bubble-speech" class="bubble speech"></div>
<div id="bubble-thought" class="bubble thought"></div>

<!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
<div class="controls">
  <button id="btn-pet">üê∂ Pet Yukki</button>
  <button id="btn-treat">ü¶¥ Give Treat</button>
  <button id="btn-bg">üé® Change Background</button>
  <button id="btn-leave">üö™ Leave</button>
</div>

<!-- –ü–æ–ª–æ—á–∫–∏ -->
<div id="shelf-bottom" class="shelf"></div>
<div id="shelf-left" class="shelf"></div>
<div id="shelf-right" class="shelf"></div>

<!-- –ö–∞–Ω–≤–∞—Å —Å —Ñ–∏–∑–∏–∫–æ–π -->
<canvas id="world"></canvas>

<!-- Matter.js physics engine -->
<script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>
<script>
  // === –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã ===
  const yukki = document.getElementById('yukki');
  const bubbleSpeech = document.getElementById('bubble-speech');
  const bubbleThought = document.getElementById('bubble-thought');
  const btnPet = document.getElementById('btn-pet');
  const btnTreat = document.getElementById('btn-treat');
  const btnBg = document.getElementById('btn-bg');
  const btnLeave = document.getElementById('btn-leave');
  const worldCanvas = document.getElementById('world');

  // === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ–Ω–æ–≤ ===
  const backgrounds = [
    'stickers/paws_bg.png',
    'stickers/stars_bg.png',
    'stickers/hearts_bg.png',
    'stickers/clouds_bg.png'
  ];
  let bgIndex = 0;

  // === Matter.js ===
  const { Engine, Render, Runner, World, Bodies, Body, Events, Composite, Mouse, MouseConstraint, Vector } = Matter;
  const engine = Engine.create();
  const world = engine.world;

  // === –†–µ–Ω–¥–µ—Ä –∏ –∫–∞–Ω–≤–∞—Å ===
  const render = Render.create({
    canvas: worldCanvas,
    engine: engine,
    options: {
      width: window.innerWidth,
      height: window.innerHeight,
      wireframes: false,
      background: 'transparent'
    }
  });

  Render.run(render);
  const runner = Runner.create();
  Runner.run(runner, engine);

  // === –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã (–ø–æ–ª–æ—á–∫–∏) ===
  const shelfBottom = Bodies.rectangle(window.innerWidth / 2, window.innerHeight - 30, window.innerWidth, 60, {
    isStatic: true,
    render: { fillStyle: '#a97c50' },
    label: 'shelf-bottom'
  });
  const shelfLeft = Bodies.rectangle(95, window.innerHeight - 150, 150, 15, {
    isStatic: true,
    render: { fillStyle: '#a97c50' },
    label: 'shelf-left'
  });
  const shelfRight = Bodies.rectangle(window.innerWidth - 130, window.innerHeight - 220, 160, 20, {
    isStatic: true,
    render: { fillStyle: '#a97c50' },
    label: 'shelf-right'
  });
  World.add(world, [shelfBottom, shelfLeft, shelfRight]);

  // === –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –∏ –≤–æ–∑–¥—É—Ö ===
  engine.world.gravity.y = 1.1;

  // === –ò–≥—Ä—É—à–∫–∏ –Æ–∫–∫–∏ ===
  const toys = [];

  // === –î–æ–±–∞–≤–ª—è–µ–º –º—è—á (‚öΩ) - —Å—Ä–∞–∑—É —Å–≤–µ—Ä—Ö—É, –ø–∞–¥–∞–µ—Ç –Ω–∞ –ø–æ–ª–æ—á–∫–∏ ===
  function spawnBall() {
    const ball = Bodies.circle(window.innerWidth / 2, -40, 22, {
      restitution: 0.7,
      density: 0.0006,
      friction: 0.2,
      frictionAir: 0.03,
      label: 'ball',
      render: {
        sprite: {
          texture: '',
          content: '‚öΩ'
        }
      }
    });
    toys.push(ball);
    World.add(world, ball);
  }

  // === –ö–æ—Å—Ç–æ—á–∫–∏ (ü¶¥), –ø–∞–¥–∞—é—Ç –ø–∞—á–∫–∞–º–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ ===
  function spawnBones(count = 2) {
    for (let i = 0; i < count; i++) {
      const size = 12 + Math.random() * 8;
      const bone = Bodies.rectangle(
        50 + Math.random() * (window.innerWidth - 100),
        -50 - Math.random() * 200,
        size * 1.3,
        size * 0.6,
        {
          restitution: 0.5,
          density: 0.0008,
          friction: 0.3,
          frictionAir: 0.05,
          label: 'bone',
          angle: Math.random() * Math.PI,
          render: {
            sprite: {
              texture: '',
              content: 'ü¶¥'
            }
          }
        }
      );
      toys.push(bone);
      World.add(world, bone);
    }
  }

  // === –£–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä—É—à–µ–∫ –∑–∞ —ç–∫—Ä–∞–Ω–æ–º —Å–Ω–∏–∑—É ===
  Events.on(engine, 'afterUpdate', () => {
    for (let i = toys.length - 1; i >= 0; i--) {
      const t = toys[i];
      if (t.position.y > window.innerHeight + 100) {
        World.remove(world, t);
        toys.splice(i, 1);
      }
    }
  });

  // === –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∏–≥—Ä—É—à–µ–∫ –º—ã—à–∫–æ–π ===
  const mouse = Mouse.create(render.canvas);
  const mouseConstraint = MouseConstraint.create(engine, {
    mouse,
    constraint: {
      stiffness: 0.25,
      render: { visible: false }
    }
  });
  World.add(world, mouseConstraint);

  // === –Æ–∫–∫–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ ‚Äî –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –º—ã—Å–ª–∏ (üí≠), –∞ —Ç–∞–∫–∂–µ —Å–º–µ–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—Ä—Ç –ø—Ä–∏ —É—Ö–æ–¥–µ ===
  const yukkiThoughts = ['üíû', 'üêæ', 'ü•∞', 'üòá', 'üçñ', 'üêï'];
  const yukkiSpeechLeave = "Don't go ü•∫";
  let hasLeft = false;

  yukki.addEventListener('click', () => {
    showBubbleThought(randomChoice(yukkiThoughts), 3000);
  });

  btnPet.addEventListener('click', () => {
    showBubbleThought(randomChoice(yukkiThoughts), 3000);
  });

  btnTreat.addEventListener('click', () => {
    spawnBones(randomInt(1,2));
  });

  btnBg.addEventListener('click', () => {
    bgIndex = (bgIndex + 1) % backgrounds.length;
    document.body.style.backgroundImage = `url('${backgrounds[bgIndex]}')`;
  });

  btnLeave.addEventListener('click', () => {
    if (!hasLeft) {
      yukki.src = 'Yukki_sad.png';
      showBubbleSpeech(yukkiSpeechLeave, 4000);
      hasLeft = true;
      setTimeout(() => {
        yukki.src = 'Yukki.png';
      }, 4000);
    } else {
      window.location.href = 'https://yukki-dog.github.io/wallpapers/home_page.html';
    }
  });

  // === –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ—á—å (üó®) ===
  function showBubbleSpeech(text, duration=3000) {
    bubbleSpeech.textContent = text;
    bubbleSpeech.classList.add('visible');
    setTimeout(() => bubbleSpeech.classList.remove('visible'), duration);
  }
  // === –ü–æ–∫–∞–∑–∞—Ç—å –º—ã—Å–ª–∏ (üí≠) ===
  function showBubbleThought(text, duration=3000) {
    bubbleThought.textContent = text;
    bubbleThought.classList.add('visible');
    setTimeout(() => bubbleThought.classList.remove('visible'), duration);
  }

  // === –£—Ç–∏–ª–∏—Ç—ã ===
  function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }
  function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ===
  spawnBall();
  document.body.style.backgroundImage = `url('${backgrounds[bgIndex]}')`;

  // === –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ –æ–∫–Ω–∞ ===
  window.addEventListener('resize', () => {
    render.bounds.max.x = window.innerWidth;
    render.bounds.max.y = window.innerHeight;
    render.options.width = window.innerWidth;
    render.options.height = window.innerHeight;
    render.canvas.width = window.innerWidth;
    render.canvas.height = window.innerHeight;

    Body.setPosition(shelfBottom, { x: window.innerWidth / 2, y: window.innerHeight - 30 });
    Body.setPosition(shelfLeft, { x: 95, y: window.innerHeight - 150 });
    Body.setPosition(shelfRight, { x: window.innerWidth - 130, y: window.innerHeight - 220 });
  });

  // === –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ ===
  (function animate() {
    requestAnimationFrame(animate);
    // –¢—É—Ç –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –Æ–∫–∫–∏, –º—ã—à–∏, –∏–≥—Ä—É—à–µ–∫
  })();

</script>
</body>
</html>
