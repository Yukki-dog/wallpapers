<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Water Wallpapers</title>
  <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg1: linear-gradient(to bottom, #a2d4f2, #057d9f);
      --text-color: #011627;
      --caption-color: #005577;
      --btn-bg: #0077be;
      --btn-bg-hover: #005f99;
      --wallpaper-bg: rgba(255, 255, 255, 0.85);
      --wallpaper-shadow: rgba(0, 0, 0, 0.1);
      --vote-selected-glow: #00bcd4;
    }
    body {
      font-family: 'Gloria Hallelujah', cursive;
      margin: 0;
      padding: 20px;
      background: var(--bg1);
      overflow-x: hidden;
      position: relative;
      color: var(--text-color);
      transition: background 0.5s, color 0.5s;
    }
    h1 {
      text-align: center;
      font-size: 2.7em;
      margin-bottom: 40px;
      color: var(--caption-color);
      text-shadow: 0 0 8px rgba(255,255,255,0.6);
      user-select: none;
    }
    .wallpaper {
      background: var(--wallpaper-bg);
      border-radius: 16px;
      box-shadow: 0 0 15px var(--wallpaper-shadow);
      padding: 20px;
      margin: 20px auto;
      max-width: 600px;
      text-align: center;
      transition: background 0.5s, box-shadow 0.5s;
    }
    .wallpaper img {
      max-width: 100%;
      border-radius: 10px;
    }
    .caption {
      margin-top: 10px;
      font-size: 1.3em;
      color: var(--caption-color);
      user-select: none;
    }
    .buttons {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 60px;
    }
    .vote-btn {
      background: none;
      border: none;
      font-size: 2.2em;
      cursor: pointer;
      transition: transform 0.2s, filter 0.3s;
      color: var(--caption-color);
      user-select: none;
    }
    .vote-btn:hover {
      transform: scale(1.2);
    }
    .vote-btn.selected {
      filter: drop-shadow(0 0 5px var(--vote-selected-glow));
    }
    .counter {
      font-size: 1em;
      color: var(--caption-color);
      user-select: none;
    }
    .download {
      margin-top: 15px;
      display: inline-block;
      padding: 8px 16px;
      background: var(--btn-bg);
      color: white;
      text-decoration: none;
      border-radius: 8px;
      transition: background 0.3s;
      font-size: 1em;
      cursor: pointer;
      user-select: none;
      border: none;
    }
    .download:hover {
      background: var(--btn-bg-hover);
    }
    #downloadModal {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      max-width: 600px;
      width: 90%;
    }
    .modal-content h2 {
      margin-top: 0;
      color: var(--caption-color);
      user-select: none;
    }
    .variant-options {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 15px;
    }
    .variant-options img {
      width: 30%;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.3s;
      user-select: none;
    }
    .variant-options img:hover {
      transform: scale(1.05);
    }
    .close-modal {
      margin-top: 20px;
      background: #ccc;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
    }
    .fish, .bubble {
      position: absolute;
      pointer-events: none;
      user-select: none;
      opacity: 0.3;
      z-index: 0;
    }
    .fish {
      font-size: 2rem;
      animation: swim-left linear infinite;
    }
    @keyframes swim-left {
      from { transform: translateX(150vw); }
      to { transform: translateX(-150vw); }
    }
    .bubble {
      font-size: 1.5rem;
      color: white;
      animation: float-up linear infinite;
    }
    @keyframes float-up {
      from { transform: translateY(100vh); opacity: 0.5; }
      to { transform: translateY(-10vh); opacity: 0; }
    }
    .bubble-small  { font-size: 1rem; }
    .bubble-large  { font-size: 2rem; }
    .bubble-medium { font-size: 1.5rem; }
  </style>
</head>
<body>

<h1>Water Mood Wallpapers</h1>

<div class="wallpaper" data-id="phone">
  <img src="Water_phone1.png" alt="Water Phone" />
  <div class="caption">Phone size</div>
  <div class="buttons">
    <button class="vote-btn like" title="Like">üê¨</button>
    <button class="vote-btn dislike" title="Dislike">üê°</button>
  </div>
  <div class="counter"><span class="like-count">0</span> / <span class="dislike-count">0</span></div>
  <button class="download" data-type="phone">Download</button>
</div>

<div class="wallpaper" data-id="laptop">
  <img src="Water_laptop1.png" alt="Water Laptop" />
  <div class="caption">Laptop / Tablet size</div>
  <div class="buttons">
    <button class="vote-btn like" title="Like">üê¨</button>
    <button class="vote-btn dislike" title="Dislike">üê°</button>
  </div>
  <div class="counter"><span class="like-count">0</span> / <span class="dislike-count">0</span></div>
  <button class="download" data-type="laptop">Download</button>
</div>

<!-- MODAL -->
<div id="downloadModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal-content">
    <h2 id="modalTitle">Choose a version to download</h2>
    <div class="variant-options" id="variantOptions"></div>
    <button class="close-modal" aria-label="Close download modal">Close</button>
  </div>
</div>

<script>
  // –ú–∞—Å—Å–∏–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –º–æ—Ä—Å–∫–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏
  const variants = {
    phone: [
      'Water_phone1.png',
      'Water_phone2.png',
      'Water_phone3.png'
    ],
    laptop: [
      'Water_laptop1.png',
      'Water_laptop2.png',
      'Water_laptop3.png'
    ]
  };

  // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –∫–∞—Ä—Ç–∏–Ω–∫–∏
  document.querySelectorAll('.download').forEach(button => {
    button.addEventListener('click', () => {
      const type = button.dataset.type;
      const variantContainer = document.getElementById('variantOptions');
      variantContainer.innerHTML = '';
      variants[type].forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = `Download ${src}`;
        img.title = `Download ${src}`;
        img.tabIndex = 0;
        img.style.cursor = 'pointer';
        img.addEventListener('click', () => {
          const a = document.createElement('a');
          a.href = src;
          a.download = src;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          closeModal();
        });
        variantContainer.appendChild(img);
      });
      openModal();
    });
  });

  // –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏
  const modal = document.getElementById('downloadModal');
  function openModal() {
    modal.style.display = 'flex';
    // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
    const firstImg = modal.querySelector('.variant-options img');
    if (firstImg) firstImg.focus();
  }
  function closeModal() {
    modal.style.display = 'none';
  }
  document.querySelector('.close-modal').addEventListener('click', closeModal);
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
  window.addEventListener('keydown', e => {
    if (e.key === 'Escape' && modal.style.display === 'flex') {
      closeModal();
    }
  });

  // –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (–ª–∞–π–∫ / –¥–∏–∑–ª–∞–π–∫) —Å –ª–æ–∫–∞–ª—å–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
  document.querySelectorAll('.wallpaper').forEach(box => {
    const id = box.dataset.id;
    const likeBtn = box.querySelector('.like');
    const dislikeBtn = box.querySelector('.dislike');
    const likeCount = box.querySelector('.like-count');
    const dislikeCount = box.querySelector('.dislike-count');

    let state = localStorage.getItem('vote-' + id) || 'none';

    function updateUI() {
      likeBtn.classList.remove('selected');
      dislikeBtn.classList.remove('selected');
      if (state === 'like') {
        likeBtn.classList.add('selected');
        likeCount.textContent = '1';
        dislikeCount.textContent = '0';
      } else if (state === 'dislike') {
        dislikeBtn.classList.add('selected');
        likeCount.textContent = '0';
        dislikeCount.textContent = '1';
      } else {
        likeCount.textContent = '0';
        dislikeCount.textContent = '0';
      }
    }

    updateUI();

    likeBtn.addEventListener('click', () => {
      state = (state === 'like') ? 'none' : 'like';
      localStorage.setItem('vote-' + id, state);
      updateUI();
    });

    dislikeBtn.addEventListener('click', () => {
      state = (state === 'dislike') ? 'none' : 'dislike';
      localStorage.setItem('vote-' + id, state);
      updateUI();
    });
  });

  // –†—ã–±–∫–∏ –∞–Ω–∏–º–∞—Ü–∏—è
  const fishEmojis = ['üê†', 'üê≥', 'üêü', 'üê¨'];
  for (let i = 0; i < 10; i++) {
    const fish = document.createElement('div');
    fish.className = 'fish';
    fish.textContent = fishEmojis[Math.floor(Math.random() * fishEmojis.length)];
    fish.style.top = `${Math.random() * 90}%`;
    fish.style.left = `${100 + Math.random() * 50}vw`;
    fish.style.fontSize = `${1.5 + Math.random()}rem`;
    fish.style.animationDuration = `${30 + Math.random() * 30}s`;
    document.body.appendChild(fish);
  }

  // –ü—É–∑—ã—Ä–∏–∫–∏ –∞–Ω–∏–º–∞—Ü–∏—è
  const bubbles = ['O', '0', 'o'];
  for (let i = 0; i < 40; i++) {
    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.textContent = bubbles[Math.floor(Math.random() * bubbles.length)];
    bubble.classList.add(['bubble-small', 'bubble-medium', 'bubble-large'][Math.floor(Math.random() * 3)]);
    bubble.style.left = `${Math.random() * 100}vw`;
    bubble.style.position = 'fixed';
    bubble.style.bottom = '-2rem';
    bubble.style.opacity = 0.3 + Math.random() * 0.4;
    bubble.style.color = '#fff';
    bubble.style.fontSize = `${1 + Math.random() * 1.5}rem`;
    bubble.style.animation = `float-up ${6 + Math.random() * 10}s linear infinite`;
    bubble.style.pointerEvents = 'none';
    bubble.style.userSelect = 'none';
    document.body.appendChild(bubble);
  }
</script>

</body>
</html>
